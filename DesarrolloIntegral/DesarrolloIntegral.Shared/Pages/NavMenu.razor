@using Microsoft.AspNetCore.Components.Routing

<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">Desarrollo Integral</a>
        <button title="Navigation menu" class="navbar-toggler" @onclick="ToggleNavMenu">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</div>

<div class="@NavMenuCssClass" @onclick="ToggleNavMenu">
    <ul class="flex-column">
        @if (Tipo != 1)
        {
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> ValidacionCatalogos()">
                    <span class="oi oi-cart" aria-hidden="true"></span> Catálogos
                </NavLink>
                @if (expandMenuCatalogos)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/personales">
                                    <span class="oi oi-basket" aria-hidden="true"></span> Personal
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/unidades">
                                    <span class="oi oi-box" aria-hidden="true"></span> Unidades
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/empresa">
                                    <span class="oi oi-box" aria-hidden="true"></span> Empresas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/lineas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Líneas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="usuarios">
                                    <span class="oi oi-box" aria-hidden="true"></span> Usuarios
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="perfiles">
                                    <span class="oi oi-box" aria-hidden="true"></span> Perfiles
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="puestos">
                                    <span class="oi oi-box" aria-hidden="true"></span> puestos
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="zonas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Zonas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="descuentos">
                                    <span class="oi oi-box" aria-hidden="true"></span> Descuentos
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="tarifas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Tarifas
                                </NavLink>
                            </CascadingValue>
                        </li>
                    </ul>
                }
            </li> //Menu Catalogos

            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> ValidacionRol()">
                    <span class="oi oi-cart" aria-hidden="true"></span> Rol
                </NavLink>
                @if (expandMenuRol)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="puntos">
                                    <span class="oi oi-basket" aria-hidden="true"></span> PuntosRecorrido
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/unidadOperador">
                                    <span class="oi oi-box" aria-hidden="true"></span> Operador-Unidad
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/rutas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Rutas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="temporadas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Temporadas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="itinerarios">
                                    <span class="oi oi-box" aria-hidden="true"></span> Itinerarios
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="generarol">
                                    <span class="oi oi-box" aria-hidden="true"></span> GeneraRol
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="rol">
                                    <span class="oi oi-box" aria-hidden="true"></span> Rol
                                </NavLink>
                            </CascadingValue>
                        </li>

                    </ul>
                }
            </li> //Menu Rol

            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> ValidacionCortes()">
                    <span class="oi oi-cart" aria-hidden="true"></span> GestionCortes
                </NavLink>
                @if (expandMenuCortes)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/cancelarboletos">
                                    <span class="oi oi-basket" aria-hidden="true"></span> CancelarBoleto
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/terminarcorte">
                                    <span class="oi oi-box" aria-hidden="true"></span> TerminarCorte
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/imprimircorte">
                                    <span class="oi oi-box" aria-hidden="true"></span> ImprimirCorte
                                </NavLink>
                            </CascadingValue>
                        </li>
                    </ul>
                }
            </li> //Menu Cortes

            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> ValidacionRecauda()">
                    <span class="oi oi-cart" aria-hidden="true"></span> Recaudación
                </NavLink>
                @if (expandMenuRecauda)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/hacercuenta">
                                    <span class="oi oi-basket" aria-hidden="true"></span> HacerCuenta
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/cancelaboleto">
                                    <span class="oi oi-basket" aria-hidden="true"></span> CancelarBoletos
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/liquidacion">
                                    <span class="oi oi-basket" aria-hidden="true"></span> Liquidación
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/cancelarrecibo">
                                    <span class="oi oi-basket" aria-hidden="true"></span> CancelarRecibo
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/corterecaudado">
                                    <span class="oi oi-basket" aria-hidden="true"></span> CorteRecaudado
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/terminarrecauda">
                                    <span class="oi oi-box" aria-hidden="true"></span> TerminarRecauda
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/imprimirrecauda">
                                    <span class="oi oi-box" aria-hidden="true"></span> ImprimirRecauda
                                </NavLink>
                            </CascadingValue>
                        </li>
                    </ul>
                }
            </li> //Menu Recaudacion

            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> ValidacionDepositos()">
                    <span class="oi oi-cart" aria-hidden="true"></span> Depositos
                </NavLink>
                @if (expandMenuDepositos)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="bancos">
                                    <span class="oi oi-box" aria-hidden="true"></span> Bancos
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/cortemanual">
                                    <span class="oi oi-basket" aria-hidden="true"></span> CorteManual
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/fichaboucher">
                                    <span class="oi oi-basket" aria-hidden="true"></span> FichaBoucher
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/reportedepositos">
                                    <span class="oi oi-basket" aria-hidden="true"></span> ReporteDepositos
                                </NavLink>
                            </CascadingValue>
                        </li>
                    </ul>
                }
            </li> //Menu Depositos
        }
        @if (Tipo == 1)
        {
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> expandMenuBoletos = !expandMenuBoletos">
                    <span class="oi oi-cart" aria-hidden="true"></span> Ventas
                </NavLink>
                @if (expandMenuBoletos)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/boletos">
                                    <span class="oi oi-basket" aria-hidden="true"></span> Boletos
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/cortecajaventa">
                                    <span class="oi oi-box" aria-hidden="true"></span> GeneraCorte
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/canjerecibo">
                                    <span class="oi oi-box" aria-hidden="true"></span> CanjeRecibo
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/auditoria">
                                    <span class="oi oi-box" aria-hidden="true"></span> Auditoría
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="liberarasiento">
                                    <span class="oi oi-box" aria-hidden="true"></span> LiberarAsiento
                                </NavLink>
                            </CascadingValue>
                        </li>
                    </ul>
                }
            </li>
            <li class="nav-item px-3">
                <NavLink class="nav-link" href="" @onclick="()=> expandMenuCatalogos = !expandMenuCatalogos">
                    <span class="oi oi-cart" aria-hidden="true"></span> Catálogos
                </NavLink>
                @if (expandMenuCatalogos)
                {
                    <ul class="nav flex-column">
                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/personal">
                                    <span class="oi oi-basket" aria-hidden="true"></span> Personal
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/unidades">
                                    <span class="oi oi-box" aria-hidden="true"></span> Unidades
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/empresas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Empresas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="/lineas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Líneas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="usuarios">
                                    <span class="oi oi-box" aria-hidden="true"></span> Usuarios
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="perfiles">
                                    <span class="oi oi-box" aria-hidden="true"></span> Perfiles
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="zonas">
                                    <span class="oi oi-box" aria-hidden="true"></span> Zonas
                                </NavLink>
                            </CascadingValue>
                        </li>

                        <li class="nav-item px-3">
                            <CascadingValue Value="@rutaCnx">
                                <NavLink class="nav-link" href="bancos">
                                    <span class="oi oi-box" aria-hidden="true"></span> Bancos
                                </NavLink>
                            </CascadingValue>
                        </li>
                    </ul>
                }
            </li>
        }
    </ul>
</div>

@code {
    [CascadingParameter]
    public string? rutaCnx { get; set; }

    [CascadingParameter]
    protected int Tipo { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        string datos = rutaCnx;
        int tip = Tipo;
    }

    private bool collapseNavMenu = true;
    private bool expandMenuCatalogos;
    private bool expandMenuRol;
    private bool expandMenuBoletos;
    private bool expandMenuCortes;
    private bool expandMenuRecauda;
    private bool expandMenuDepositos;

    private string NavMenuCssClass => collapseNavMenu ? "collapse" : null!;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    private void ValidacionCatalogos()
    {
        if (expandMenuCatalogos)
        {
            expandMenuCatalogos = false;
            expandMenuRol = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
        else
        {
            expandMenuCatalogos = true;
            expandMenuRol = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
    }

    private void ValidacionRol()
    {
        if (expandMenuRol)
        {
            expandMenuRol = false;
            expandMenuCatalogos = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
        else
        {
            expandMenuCatalogos = false;
            expandMenuRol = true  ;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
    }

    private void ValidacionBoletos()
    {
        if (expandMenuBoletos)
        {
            expandMenuRol = false;
            expandMenuCatalogos = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
        else
        {
            expandMenuCatalogos = false;
            expandMenuRol = false;
            expandMenuBoletos = true;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
    }

    private void ValidacionCortes()
    {
        if (expandMenuCortes)
        {
            expandMenuRol = false;
            expandMenuCatalogos = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
        else
        {
            expandMenuCatalogos = false;
            expandMenuRol = false;
            expandMenuBoletos = false;
            expandMenuCortes = true;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
    }

    private void ValidacionRecauda()
    {
        if (expandMenuRecauda)
        {
            expandMenuRol = false;
            expandMenuCatalogos = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
        else
        {
            expandMenuCatalogos = false;
            expandMenuRol = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = true;
            expandMenuDepositos = false;
        }
    }

    private void ValidacionDepositos()
    {
        if (expandMenuDepositos)
        {
            expandMenuRol = false;
            expandMenuCatalogos = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = false;
        }
        else
        {
            expandMenuCatalogos = false;
            expandMenuRol = false;
            expandMenuBoletos = false;
            expandMenuCortes = false;
            expandMenuRecauda = false;
            expandMenuDepositos = true;
        }
    }
}